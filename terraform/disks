resource "azurerm_managed_disk" "myManagedDisk" {
    name                 = "managed-disk-data"
    location             = azurerm_resource_group.rg.location
    resource_group_name  = azurerm_resource_group.rg.name
    storage_account_type = "Standard_LRS"
    create_option        = "Empty"
    disk_size_gb         = 10
}

resource "azurerm_virtual_machine_data_disk_attachment" "myDataDisk" {
    count              = length(var.vms_disks_index_number)
    managed_disk_id    = azurerm_managed_disk.myManagedDisk.id
    virtual_machine_id = azurerm_linux_virtual_machine.myVM["${var.vms_disks_index_number[count.index]}"].id
    lun                = "${count.index  + 10}"
    caching            = "ReadWrite"
}